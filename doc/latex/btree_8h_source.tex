\doxysection{btree.\+h}
\hypertarget{btree_8h_source}{}\label{btree_8h_source}\index{src/btree.h@{src/btree.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}boost/container/small\_vector.hpp"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifdef\ BTREE\_ENABLE\_JSON}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Key,\ \textcolor{keyword}{typename}\ Value,\ \textcolor{keyword}{typename}\ Compare\ =\ std::less<Key>>}
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_b_tree_ac7841baccc584bd46c5ddbaa269c7c69}{BTree}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_b_tree_aa466823af040ada3f5a56574e337a526}{s\_CAPACITY}}\ =\ 32;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_b_tree_ac7841baccc584bd46c5ddbaa269c7c69}{BTree}}(\textcolor{keyword}{const}\ Compare\&\ comp\ =\ Compare\{\});}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_b_tree_1_1_node_ac96ca8a83369119de34217b4e1b555ce}{Node}}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isLeaf;}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<Key>\ keys;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<Node*>\ children;}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ boost::container::small\_vector<std::pair<Key,\ Value>,\ \mbox{\hyperlink{class_b_tree_aa466823af040ada3f5a56574e337a526}{s\_CAPACITY}}>\ entries;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_b_tree_1_1_node_ac96ca8a83369119de34217b4e1b555ce}{Node}}*\ nextLeaf;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_b_tree_1_1_node_ac96ca8a83369119de34217b4e1b555ce}{Node}}*\ prevLeaf;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{struct_b_tree_1_1_node_ac96ca8a83369119de34217b4e1b555ce}{Node}}(\textcolor{keywordtype}{bool}\ leaf);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ Value\&\ \mbox{\hyperlink{class_b_tree_adfb513daae74e467d51c9bf88af2596a}{operator[]}}(\textcolor{keyword}{const}\ Key\&\ key);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_b_tree_a4a1d1d6517f181018efa489d009d0fcc}{size}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_b_tree_a1f618d0a26ec20a12ad3b05e06c78970}{insert}}(\textcolor{keyword}{const}\ Key\ \&key,\ \textcolor{keyword}{const}\ Value\ \&value);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ Value*\ \mbox{\hyperlink{class_b_tree_a6ac491a77f862fa00a94cf7a688d7e48}{search}}(\textcolor{keyword}{const}\ Key\ \&key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_b_tree_a0a0989a366b92907a8389360532e201b}{remove}}(\textcolor{keyword}{const}\ Key\ \&key);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ std::vector<std::pair<const\ Key*,\ Value*>>\ \mbox{\hyperlink{class_b_tree_a7dd69dade4718a185d457a71d855b517}{range}}(\textcolor{keyword}{const}\ Key\ \&low,\ \textcolor{keyword}{const}\ Key\ \&high);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ std::vector<std::pair<const\ Key*,\ Value*>>\ \mbox{\hyperlink{class_b_tree_a50a547458b425a5d3edbf31cbe6d350e}{range}}(\textcolor{keyword}{const}\ Key\ \&low,\ \textcolor{keywordtype}{size\_t}\ count);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#ifdef\ BTREE\_ENABLE\_JSON}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ std::string\ serializeToJson()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ std::string\ serializeToJson()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ std::string\{\};\ \}}
\DoxyCodeLine{00144\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_b_tree_1_1_iterator}{Iterator}};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ Iterator\ \mbox{\hyperlink{class_b_tree_a150e650122b9926ad7bcfcacda0046d8}{begin}}();}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ Iterator\ \mbox{\hyperlink{class_b_tree_a0346e361fbb10fa5827c8c00a9cea2e1}{end}}()\ noexcept;}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \string~\mbox{\hyperlink{class_b_tree_ac7841baccc584bd46c5ddbaa269c7c69}{BTree}}();}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ private:}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ Node*\ m\_Root;}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ Compare\ m\_Comp;}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ m\_Size\{0\};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_a644946dc5c2b58a1c7ddf8d52fa1b2e8}{splitChild}}(Node*\ parent,\ \textcolor{keywordtype}{size\_t}\ index);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_b_tree_a760c03d4ce002fdc71a531e2c47b420b}{insertNonFull}}(Node*\ node,\ \textcolor{keyword}{const}\ Key\&\ key,\ \textcolor{keyword}{const}\ Value\&\ value);}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_a6a530f1aca4a6ab8d2009ea5e3dde846}{rebalanceLeaf}}(Node*\ leaf,\ Node*\ parent,\ \textcolor{keywordtype}{size\_t}\ index);}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_af95c5741c674dc4532336c0adab4ea3a}{rebalanceInternal}}(Node*\ node,\ Node*\ parent,\ \textcolor{keywordtype}{size\_t}\ index);}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_a4faf55ac6eafe3249ecfea528e2b6940}{removeFromNode}}(Node\ *node,\ \textcolor{keyword}{const}\ Key\ \&key);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ Key\ \mbox{\hyperlink{class_b_tree_aa53d01b3c5039553df1f1fbe6afbf337}{getPredecessor}}(Node\ *node,\ \textcolor{keywordtype}{size\_t}\ idx)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ Key\ \mbox{\hyperlink{class_b_tree_acf3b2d3f85cd319dd01dbffc970614c7}{getSuccessor}}(Node\ *node,\ \textcolor{keywordtype}{size\_t}\ idx)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_a391b01dbf324db440cc17a77e631a064}{fill}}(Node\ *node,\ \textcolor{keywordtype}{size\_t}\ idx);}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_a8db0d5ceac0ac47ed3a22ad5ea7b1d94}{borrowFromPrev}}(Node\ *node,\ \textcolor{keywordtype}{size\_t}\ idx);}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_aa8547724653e13afd62e9f2ef384ff2a}{borrowFromNext}}(Node\ *node,\ \textcolor{keywordtype}{size\_t}\ idx);}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_aac69f678bcb722552d0123503594b08d}{mergeNodes}}(Node\ *node,\ \textcolor{keywordtype}{size\_t}\ idx);}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_b_tree_a5dcf22843ae0428dfc1dc6e108955c06}{destroyNode}}(Node\ *node);}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_b_tree_a2f8fc0b0f01e1839ceddd94b278d05ae}{less}}(\textcolor{keyword}{const}\ Key\&\ a,\ \textcolor{keyword}{const}\ Key\&\ b)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00341\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_Comp(a,\ b);}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }Iterator;}
\DoxyCodeLine{00346\ \};}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#include\ "{}btree.cpp"{}}}

\end{DoxyCode}
